<%# Meetups Index - Updated with type filter and type column %>
<header class="page-header">
  <h1 class="page-title">
    Spotkania
    <span class="badge badge-count"><%= @total_meetups %></span>
  </h1>
  <p class="page-subtitle">ZarzÄ…dzaj spotkaniami TRUG i ich prezentacjami</p>
</header>

<section class="section">
  <div class="action-grid">
    <%= link_to new_admin_meetup_path, class: "action-card" do %>
      <span class="action-card-icon" aria-hidden="true">+</span>
      <span class="action-card-label">Nowe spotkanie</span>
    <% end %>
  </div>
  
  <%# Type Filter %>
  <div class="filter-section">
    <label for="type-filter" class="filter-label">Filtruj wedÅ‚ug typu:</label>
    <%= select_tag :type, 
         options_for_select([["Wszystkie", ""], ["TRUG", "formal"], ["TRUG Bar", "bar"]], params[:type]),
        id: "type-filter", 
        class: "form-select form-select--filter",
        onchange: "window.location.href = '?type=' + this.value" %>
  </div>
  
  <%# Stats %>
  <div class="stats-grid">
    <article class="stat-card">
      <span class="stat-icon" aria-hidden="true">ðŸ“Š</span>
      <span class="stat-number"><%= @total_meetups %></span>
      <span class="stat-label">Wszystkie spotkania</span>
    </article>
  
    <article class="stat-card">
      <span class="stat-icon" aria-hidden="true">ðŸš€</span>
      <span class="stat-number"><%= @upcoming_meetups %></span>
      <span class="stat-label">NadchodzÄ…ce</span>
    </article>
  
    <article class="stat-card">
      <span class="stat-icon" aria-hidden="true">ðŸŽ¤</span>
      <span class="stat-number"><%= @total_talks %></span>
      <span class="stat-label">Prezentacje</span>
    </article>
  </div>
  
  <%# Meetups List %>
  <div class="card">
    <div class="card-header">
      <h2 class="card-header-title">
        <span aria-hidden="true">ðŸ“…</span>
        Lista spotkaÅ„
      </h2>
    </div>
    <div class="card-body">
      <% if @meetups.any? %>
        <ul class="meetup-list" role="list">
          <% @meetups.each do |meetup| %>
            <li class="meetup-list-item">
              <div class="meetup-list-info">
                <% if meetup.event_type == 'formal' && meetup.number.present? %>
                  <span class="meetup-list-number" aria-hidden="true"><%= meetup.number %></span>
                <% end %>
                <div class="meetup-list-details">
                  <span class="meetup-list-title">
                     <%= meetup.event_type == 'formal' ? "Spotkanie ##{meetup.number}" : "TRUG Bar" %>
                  </span>
                  <span class="meetup-list-type-badge <%= "meetup-list-type--#{meetup.event_type}" %>">
                     <%= meetup.event_type == 'formal' ? 'TRUG' : 'TRUG Bar' %>
                  </span>
                  <span class="meetup-list-meta">
                    <time datetime="<%= meetup.date.iso8601 %>"><%= l meetup.date, format: :long %></time>
                    <% if meetup.date.today? %>
                      <span class="badge badge-today">Dzisiaj</span>
                    <% elsif meetup.date.future? %>
                      <span class="badge badge-upcoming">NadchodzÄ…ce</span>
                    <% else %>
                      <span class="badge badge-past">Odbyte</span>
                    <% end %>
                    <span aria-hidden="true">â€¢</span>
                    <span><%= meetup.talks.size %> <%= polish_pluralize(meetup.talks.size, "prezentacja", "prezentacje", "prezentacji") %></span>
                  </span>
                </div>
              </div>
              <div class="meetup-list-actions">
                <%= link_to "SzczegÃ³Å‚y", admin_meetup_path(meetup), class: "btn btn-ghost btn-small" %>
                <%= link_to "Edytuj", edit_admin_meetup_path(meetup), class: "btn btn-brand btn-small" %>
              </div>
            </li>
          <% end %>
        </ul>
      <% else %>
        <div class="empty-state">
          <div class="empty-state-icon" aria-hidden="true">ðŸ“­</div>
          <h3 class="empty-state-title">Brak spotkaÅ„</h3>
          <p class="empty-state-description">
            Nie masz jeszcze Å¼adnych spotkaÅ„. UtwÃ³rz pierwsze spotkanie, aby rozpoczÄ…Ä‡.
          </p>
          <%= link_to "UtwÃ³rz pierwsze spotkanie", new_admin_meetup_path, class: "btn btn-brand" %>
        </div>
      <% end %>
    </div>
  </div>
</section>
